{% extends 'main.html' %}
{% load static %}
{% block content %}

<div class="any_page_container">
    <div class="container_header">
        <h3 class="text-center">Welcome to your profle, {{current_user}}</h3>
        <div class="row mt-5 ">
          <div class="col-md-6 mx-auto border border-dark p-5 text-center">
            <span class="border border-dark rounded-circle p-3 display-4 text-danger">
              {{current_user.first_name.0}}{{current_user.last_name.0}}
            </span>
            <p class="mt-4">First name: {{current_user.first_name}}</p>
            <p>Last name: {{current_user.last_name}}</p>
            <p>Email address: {{current_user.email}}</p>
            <p>Member since: {{current_user.created_at}}</p>
          </div>
        </div>

        <table class="table mt-5">
          <thead class="thead-dark">
            <th>Order Number</th>
            <th>Total cost</th>
            <th>Completed</th>
            <th>Date ordered</th>
            <th>Shipping address</th>
          </thead>
          <tbody>
            {% for order in current_user.orders.all%}
              {% for address in order.shipping_address.all %}
              <tr>
                <td>{{order.id}}</td>
                <td>${{order.total_cost |floatformat:2}}</td>
                <td>{{order.complete}}</td>
                <td>{{order.created_at}}</td>
                <td> <a class="btn btn-sm btn-primary" data-toggle="collapse" href="#order{{order.id}}" role="button" aria-expanded="false" aria-controls="multiCollapseExample1">Shipping Address</a></td>
              </tr>

              <div class="collapse multi-collapse" id="order{{order.id}}">
                <div class="card card-body mt-3">
                  <h4>Order Number #{{order.id}} Shipping Address</h4>
                  <ul class="list-group">
                    <li class="list-group-item"><span class="text-primary">Street Address: </span> {{address.address}}</li>
                    <li class="list-group-item"><span class="text-primary">City: </span>  {{address.city}}</li>
                    <li class="list-group-item"><span class="text-primary">State: </span>  {{address.state}}</li>
                    <li class="list-group-item"><span class="text-primary">Zipe Code: </span>  {{address.zipcode}}</li>
                  </ul>
                </div>
              </div>
              
              {% endfor %}
            {% endfor %}
          </tbody>
        </table>


          </div>
         
    </div>




</div>

{% endblock content %}